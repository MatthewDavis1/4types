<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Discover Your Romantic Archetype - Based on Dr. Helen Fisher's Model</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover your romantic personality type based on Dr. Helen Fisher's research">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <style>
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        .progress-bar { transition: width 0.3s ease-in-out; }
        *:focus { outline: 2px solid #4F46E5; outline-offset: 2px; }
        .chart-container {
            position: relative;
            height: 50vh;
            min-height: 300px;
            max-height: 500px;
            width: 100%;
        }
        @media (max-width: 768px) {
            .chart-container { height: 40vh; min-height: 250px; }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans leading-normal tracking-normal text-gray-900 min-h-screen">
    <div id="loadingIndicator" class="fixed inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center hidden">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div id="progressContainer" class="mb-6 hidden">
            <div class="flex justify-between mb-2">
                <span class="text-sm font-medium text-blue-600" id="progressText">Question 1 of 20</span>
                <span class="text-sm font-medium text-blue-600" id="progressPercentage">5%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div class="progress-bar bg-blue-600 h-2.5 rounded-full" style="width: 5%" id="progressBar"></div>
            </div>
        </div>

        <div id="quizSection" class="animate-fade-in">
            <header class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Discover Your Romantic Archetype</h1>
                <p class="text-xl text-gray-600">Based on Dr. Helen Fisher's Research Model</p>
            </header>
            <form id="quizForm" class="space-y-8"></form>
        </div>

        <div id="resultsSection" class="hidden animate-fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">Archetype Profile</h3>
                    <div class="chart-container">
                        <canvas id="resultsChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">Personality Radar</h3>
                    <div class="chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>
            </div>
            <div id="archetypeExplanation" class="bg-white p-8 rounded-lg shadow-lg mb-8"></div>
            <div id="compatibilitySection" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-green-50 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold text-green-800 mb-4">Best Matches</h3>
                    <div id="bestMatches"></div>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold text-blue-800 mb-4">Growth Areas</h3>
                    <div id="growthAreas"></div>
                </div>
            </div>
            <button id="retakeButton" class="mt-8 bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                Retake Quiz
            </button>
        </div>
    </div>

    <script>
        const questions = [
            { id: 1, text: "I enjoy trying new and adventurous activities.", archetype: "explorer" },
            { id: 2, text: "I prefer having a well-organized plan before starting a task.", archetype: "builder" },
            { id: 3, text: "I am comfortable making decisions quickly, even under pressure.", archetype: "director" },
            { id: 4, text: "I often think about the deeper meaning of things.", archetype: "negotiator" },
            { id: 5, text: "I feel energized when meeting new people.", archetype: "explorer" },
            { id: 6, text: "I value tradition and like to follow established rules.", archetype: "builder" },
            { id: 7, text: "I tend to focus on logical reasoning over emotions.", archetype: "director" },
            { id: 8, text: "I easily understand and share the feelings of others.", archetype: "negotiator" },
            { id: 9, text: "I seek out excitement and novel experiences in my life.", archetype: "explorer" },
            { id: 10, text: "I am reliable and people often depend on me for support.", archetype: "builder" },
            { id: 11, text: "I enjoy solving complex problems and puzzles.", archetype: "director" },
            { id: 12, text: "I often find myself daydreaming or lost in thought.", archetype: "negotiator" },
            { id: 13, text: "I communicate in a direct and straightforward manner.", archetype: "director" },
            { id: 14, text: "I prefer harmonious relationships and avoid conflict when possible.", archetype: "negotiator" },
            { id: 15, text: "I am drawn to creative and artistic pursuits.", archetype: "explorer" },
            { id: 16, text: "I pay close attention to details and notice small inconsistencies.", archetype: "builder" },
            { id: 17, text: "I find myself naturally taking charge in group situations.", archetype: "director" },
            { id: 18, text: "I value deep, meaningful conversations over small talk.", archetype: "negotiator" },
            { id: 19, text: "I prefer to maintain long-standing traditions and routines.", archetype: "builder" },
            { id: 20, text: "I tend to trust my intuition when making important decisions.", archetype: "explorer" }
        ];

        const archetypes = {
            explorer: {
                name: "Explorer",
                description: "Curious, adventurous, and spontaneous. You thrive on new experiences and creative expression.",
                color: "#4F46E5",
                bestMatches: ["negotiator", "director"],
                growthAreas: ["Consider developing more structure in your life", "Practice following through on long-term commitments"]
            },
            builder: {
                name: "Builder",
                description: "Stable, reliable, and traditional. You value structure, loyalty, and clear expectations.",
                color: "#10B981",
                bestMatches: ["negotiator", "builder"],
                growthAreas: ["Try embracing spontaneity occasionally", "Practice being more flexible with changes"]
            },
            director: {
                name: "Director",
                description: "Analytical, decisive, and focused. You excel at strategic thinking and problem-solving.",
                color: "#F59E0B",
                bestMatches: ["negotiator", "explorer"],
                growthAreas: ["Work on developing emotional intelligence", "Practice active listening skills"]
            },
            negotiator: {
                name: "Negotiator",
                description: "Empathetic, intuitive, and diplomatic. You excel at understanding others and building connections.",
                color: "#EF4444",
                bestMatches: ["director", "explorer"],
                growthAreas: ["Practice being more assertive", "Work on making decisions more quickly"]
            }
        };

        let quizForm = document.getElementById("quizForm");
        let charts = { bar: null, radar: null };

        function initializeQuiz() {
            questions.forEach(question => {
                const questionDiv = document.createElement("div");
                questionDiv.className = "bg-white p-6 rounded-lg shadow-lg";
                questionDiv.innerHTML = `
                    <p class="text-lg font-medium mb-4">${question.id}. ${question.text}</p>
                    <div class="space-y-3">
                        ${["Strongly Agree", "Agree", "Neutral", "Disagree", "Strongly Disagree"].map((option, index) => `
                            <label class="flex items-center space-x-3 p-2 rounded hover:bg-gray-50">
                                <input type="radio" name="q${question.id}" value="${5 - index}" 
                                       class="h-4 w-4 text-blue-600" required>
                                <span>${option}</span>
                            </label>
                        `).join("")}
                    </div>
                `;
                quizForm.appendChild(questionDiv);
            });

            const submitButton = document.createElement("button");
            submitButton.type = "submit";
            submitButton.className = "w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors";
            submitButton.textContent = "See Your Results";
            quizForm.appendChild(submitButton);
        }

        function calculateScores(formData) {
            const scores = { explorer: 0, builder: 0, director: 0, negotiator: 0 };
            questions.forEach(question => {
                const value = parseInt(formData.get(`q${question.id}`)) || 0;
                scores[question.archetype] += value;
            });
            return scores;
        }

        function createCharts(scores) {
            const ctx1 = document.getElementById("resultsChart").getContext("2d");
            const ctx2 = document.getElementById("radarChart").getContext("2d");
            const labels = Object.keys(scores).map(key => archetypes[key].name);
            const data = Object.values(scores);
            const colors = Object.keys(scores).map(key => archetypes[key].color);

            if (charts.bar) charts.bar.destroy();
            if (charts.radar) charts.radar.destroy();

            charts.bar = new Chart(ctx1, {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 0
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 25
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            charts.radar = new Chart(ctx2, {
                type: "radar",
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: "rgba(79, 70, 229, 0.2)",
                        borderColor: "rgba(79, 70, 229, 1)",
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 25
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function displayResults(scores) {
            const primaryType = Object.entries(scores).reduce((a, b) => b[1] > a[1] ? b : a)[0];
            const archetype = archetypes[primaryType];

            document.getElementById("archetypeExplanation").innerHTML = `
                <h2 class="text-2xl font-bold mb-4">Your Primary Type: ${archetype.name}</h2>
                <p class="text-lg mb-4">${archetype.description}</p>
            `;

            document.getElementById("bestMatches").innerHTML = archetype.bestMatches
                .map(match => `<p class="mb-2">âœ¨ ${archetypes[match].name}</p>`)
                .join("");

            document.getElementById("growthAreas").innerHTML = archetype.growthAreas
                .map(area => `<p class="mb-2">ðŸ“ˆ ${area}</p>`)
                .join("");

            document.getElementById("quizSection").classList.add("hidden");
            document.getElementById("resultsSection").classList.remove("hidden");
            createCharts(scores);
        }

        quizForm.addEventListener("submit", function(e) {
            e.preventDefault();
            const formData = new FormData(quizForm);
            const scores = calculateScores(formData);
            displayResults(scores);
        });

        document.getElementById("retakeButton").addEventListener("click", function() {
            quizForm.reset();
            document.getElementById("resultsSection").classList.add("hidden");
            document.getElementById("quizSection").classList.remove("hidden");
            window.scrollTo({ top: 0, behavior: "smooth" });
        });

        initializeQuiz();
    </script>
</body>
</html>